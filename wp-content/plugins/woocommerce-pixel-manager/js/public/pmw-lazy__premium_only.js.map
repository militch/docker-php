{"version":3,"file":"pmw-lazy__premium_only.js","mappings":"MAyBA,SAASA,IAERC,SAASC,iBAAiB,gCAAkCC,SAASC,IAEpEA,EAAOC,SACP,IAAIC,EAAkBL,SAASM,cAAc,UAC7CD,EAAgBE,IAAMJ,EAAOI,IAC7BP,SAASQ,KAAKC,YAAYJ,EAAgB,GAE5C,CA7BAL,SAASC,iBAAiB,gCAAkCC,SAASC,IACpE,IAAIO,EAAeV,SAASM,cAAc,QAC1CI,EAAYC,KAAOR,EAAOI,IAC1BG,EAAYE,IAAO,UACnBF,EAAYG,GAAO,SACnBb,SAASc,KAAKL,YAAYC,EAAY,IAId,CACxB,UACA,YACA,YACA,YACA,aACA,WACA,SAgBgBR,SAASa,IACzBf,SAASgB,iBAAiBD,GAAO,SAASE,IAKzClB,IAGAC,SAASkB,oBAAoBH,EAAOE,EAMrC,GAAE,IAIHjB,SAASgB,iBAAiB,oBAAoB,KAGV,SAAlCG,cAAcC,MAAMC,WACiB,aAAlCF,cAAcC,MAAMC,WAEvBtB,GACD,G","sources":["webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pmw-lazy__premium_only.js"],"sourcesContent":["/**\n * Process lazy loaded PMW scripts\n */\n\n// Preload the scripts\ndocument.querySelectorAll(\"script[type=\\\"text/pmw-lazy\\\"]\").forEach((script) => {\n\tlet preloadLink  = document.createElement(\"link\")\n\tpreloadLink.href = script.src\n\tpreloadLink.rel  = \"preload\"\n\tpreloadLink.as   = \"script\"\n\tdocument.head.appendChild(preloadLink)\n})\n\n// All user interaction events to listen to\nconst eventsToListenTo = [\n\t\"keydown\",\n\t\"mousedown\",\n\t\"mousemove\",\n\t\"touchmove\",\n\t\"touchstart\",\n\t\"touchend\",\n\t\"wheel\",\n]\n\n// Load scripts after interaction\nfunction activateLazyLoadedScripts() {\n\n\tdocument.querySelectorAll(\"script[type=\\\"text/pmw-lazy\\\"]\").forEach((script) => {\n\n\t\tscript.remove()\n\t\tlet preloadedScript = document.createElement(\"script\")\n\t\tpreloadedScript.src = script.src\n\t\tdocument.body.appendChild(preloadedScript)\n\t})\n}\n\n// Add event listeners to any interaction events\neventsToListenTo.forEach((event) => {\n\tdocument.addEventListener(event, function handler() {\n\n\t\t// console log timestamp\n\t\t// console.log(\"timestamp: \" + Date.now())\n\n\t\tactivateLazyLoadedScripts()\n\n\t\t// detach event listener\n\t\tdocument.removeEventListener(event, handler)\n\n\t\t// detach all event listeners\n\t\t// eventsToListenTo.forEach(function (event) {\n\t\t// \tdocument.removeEventListener(event, handler)\n\t\t// })\n\t})\n})\n\n// Always fully load scripts on cart and checkout pages\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\n\tif (\n\t\twpmDataLayer?.shop?.page_type === \"cart\"\n\t\t|| wpmDataLayer?.shop?.page_type === \"checkout\"\n\t) {\n\t\tactivateLazyLoadedScripts()\n\t}\n})\n"],"names":["activateLazyLoadedScripts","document","querySelectorAll","forEach","script","remove","preloadedScript","createElement","src","body","appendChild","preloadLink","href","rel","as","head","event","addEventListener","handler","removeEventListener","wpmDataLayer","shop","page_type"],"sourceRoot":""}